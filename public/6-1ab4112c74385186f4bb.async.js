/*! Copyright bookfromme */
webpackJsonp([6],{664:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(0),u=o(d);r(910);var s=r(23),f=r(44),p=r(260),m=o(p),_=r(85),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),v=r(142),y=o(v),x=r(141),E=r(871),g=o(E),b=r(697),w=o(b),P=r(873),k=o(P),T=r(872),I=o(T),V={digital:2900,soft19:9900,soft23:11900,hard19:14900,hard23:16900,deluxe:39900,fumoney:99e3},B=function(e){function t(){var e,r,o,n;a(this,t);for(var i=arguments.length,c=Array(i),d=0;d<i;d++)c[d]=arguments[d];return r=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={showConfirm:!1,isVoucherValid:""},o.getWrapPrice=function(e){return e.gift_wrap&&"digital"!==e.format?1e3:0},o.getTotal=function(e){return e.reduce(function(e,t){return V[t.format]+e+o.getWrapPrice(t)},0)},o.getTotalForBooks=function(e){return e.reduce(function(e,t){return V[t.format]+e},0)},n=r,l(o,n)}return i(t,e),c(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"componentWillReceiveProps",value:function(e){e.voucher.voucherStatus.isValid?this.setState({isVoucherValid:!0}):!1===e.voucher.voucherStatus.isValid&&this.setState({isVoucherValid:!1})}},{key:"render",value:function(){var e=this,t=!!this.props.order.isSent&&this.props.order.isSent;if(!this.props.book)return null;var r=this.props.book,o=(r.currentBookId,n(r,["currentBookId"])),a=(0,y.default)((0,m.default)(o)),l=this.props.voucher.voucherStatus,i=this.getTotalForBooks(a),c=this.getTotal(a),d=c-i,s=l.discount?l.discount*c:0;c-=s,this.totalForBooks=i,this.wrapPrice=d,this.total=c,this.books=Object.keys(o).map(function(e){return o[e]}),this.date=new Date,this.discount=s;var f={books:this.books,orderDetails:{price:{total:this.total,totalForBooks:this.totalForBooks,wrapPrice:this.wrapPrice,discount:this.discount},orderInfo:{name:this.props.form.name.value,phone:this.props.form.phone.value,address:this.props.form.address.value,email:this.props.form.email.value,date:this.date},voucher:""!==l.isValid?l:"no voucher"}};return a.length<1&&!0!==t?u.default.createElement("div",{className:"flex flex-center width-full flex-column",style:{paddingBottom:50,fontFamily:"RobotoRegular"}},u.default.createElement("img",{onClick:function(){e.props.history.push("/")},src:w.default,style:{width:100,height:100,marginBottom:10}}),u.default.createElement("div",{style:{fontSize:"1.2em",paddingTop:"100px",paddingBottom:"15px"}},"Вы уже сделали заказ. Вы можете посмотреть ваши заказы."),u.default.createElement(x.Button,{click:function(){e.props.history.push("/cart")}},"Страница заказов")):u.default.createElement("div",{className:"flex flex-center width-full flex-column",style:{paddingBottom:50,fontFamily:"RobotoRegular"}},u.default.createElement("img",{onClick:function(){e.props.history.push("/")},src:w.default,style:{width:100,height:100,marginBottom:10}}),!0!==t&&u.default.createElement("div",{style:{width:"100%",flexDirection:"column"},className:"flex flex-center"},u.default.createElement(I.default,{total:c,data:a,totalForBooks:i,wrapPrice:d,discount:s}),""===this.state.isVoucherValid||!1===this.state.isVoucherValid?u.default.createElement(k.default,{actions:this.props.actions,voucher:this.props.voucher}):u.default.createElement("div",{style:{paddingTop:"10px",color:"#0ec62e"}},"Промокод успешно применен."),!1===this.state.isVoucherValid&&u.default.createElement("div",{style:{paddingTop:"10px",color:"red"}},"Введенный промокод не верен.")),!0===t&&u.default.createElement("div",{style:{width:"100%",maxWidth:"500px",display:"flex",alignItems:"center",flexDirection:"column"}},u.default.createElement("div",{style:{marginTop:"40px",fontSize:"1.1em",padding:"14px",textAlign:"center"}},"Поздравляем! Ваш заказ принят. В течение часа с вами свяжется консультант для подтверждения заказа. Звонки осуществляются с 9.00 до 20.00."),u.default.createElement(x.Button,{click:function(){e.props.history.push("/cart")}},"Страница заказов")),!0!==t&&u.default.createElement("div",{style:{width:"100%",maxWidth:"500px",display:"flex",alignItems:"center",flexDirection:"column"}},u.default.createElement("div",{className:"flex-start app-order-___order__title___3cq_j",style:{margin:10,paddingLeft:5,marginTop:20,width:"100%",fontSize:25,maxWidth:500,fontFamily:"RobotoRegular"}},"Ваши детали"),u.default.createElement(g.default,{form:this.props.form,actions:this.props.actions}),u.default.createElement("div",{style:{maxWidth:500,width:"100%"},className:"flex space-between app-order-___order__btns___3_Ifo"},u.default.createElement(x.Button,{click:function(){e.props.history.push("/cart")}},"Вернуться"),u.default.createElement(x.Button,{click:function(){e.props.actions.validateForm(f),e.props.form.canConfirm&&e.setState({showConfirm:!0})}},"Заказать"))))}}]),t}(u.default.Component),F=function(e){return{book:e.book,form:e.orderForm,order:e.order,voucher:e.voucher}},O=function(e){return{actions:(0,s.bindActionCreators)(h,e)}};t.default=(0,f.connect)(F,O)(B)},697:function(e,t,r){e.exports=r.p+"logo-cbe772e898a116cd976ed4f4645c4869.png"},871:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(141);r(907);var n=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n),l=r(44),i=r(23),c=r(85),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),u=function(e){var t=e.form,r=e.actions;return a.default.createElement("div",{style:{width:"100%",maxWidth:500},className:"app-order-components-___form__r___fvmNt"},a.default.createElement(o.Input,{maxLength:50,placeholder:"Имя",field:t.name,fieldType:"name",enter:r.orderInput}),a.default.createElement("div",{style:{padding:5,paddingLeft:0}},a.default.createElement(o.ErrorText,{text:t.name.errorText})),a.default.createElement(o.Input,{placeholder:"email@email.com",field:t.email,maxLength:50,fieldType:"email",enter:r.emailInput,onBlur:r.orderInput}),a.default.createElement("div",{style:{padding:5,paddingLeft:0}},a.default.createElement(o.ErrorText,{text:t.email.errorText})),a.default.createElement(o.Input,{placeholder:"Ваш телефон",field:t.phone,maxLength:50,fieldType:"phone",enter:r.orderInput}),a.default.createElement("div",{style:{padding:5,paddingLeft:0}},a.default.createElement(o.ErrorText,{text:t.phone.errorText})),a.default.createElement(o.Input,{placeholder:"Город, улица, дом, квартира",field:t.address,maxLength:50,fieldType:"address",enter:r.orderInput}),a.default.createElement("div",{style:{padding:5,paddingLeft:0}},a.default.createElement(o.ErrorText,{text:t.address.errorText})))},s=function(e){return{form:e.orderForm}},f=function(e){return{actions:(0,i.bindActionCreators)(d,e)}};t.default=(0,l.connect)(s,f)(u)},872:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(o);r(908),t.default=function(e){var t=e.data,r=e.totalForBooks,o=e.wrapPrice,a=e.total,l=e.discount;return n.default.createElement("div",{style:{width:"100%",flexDirection:"column",fontFamily:"RobotoRegular"},className:"flex flex-center"},n.default.createElement("div",{className:"flex-start app-order-components-___orderPrice__title___MEfZS",style:{margin:10,paddingLeft:5,marginTop:10,width:"100%",fontSize:25,maxWidth:500,fontFamily:"RobotoRegular"}},"Ваш заказ"),n.default.createElement("div",{className:"flex flex-center space-between app-order-components-___orderPrice__summary___bnPVD app-order-components-___orderPrice__first___2iMv-"},n.default.createElement("div",null,t.length>1?"Книги":"Книга"),n.default.createElement("div",null,r," тг")),n.default.createElement("div",{className:"flex flex-center space-between app-order-components-___orderPrice__summary___bnPVD"},n.default.createElement("div",null,"Упаковка"),n.default.createElement("div",null,o," тг")),0!==l&&n.default.createElement("div",{className:"flex flex-center space-between app-order-components-___orderPrice__summary___bnPVD"},n.default.createElement("div",null,"Сумма"),n.default.createElement("div",null,a+l," тг")),0!==l&&n.default.createElement("div",{className:"flex flex-center space-between app-order-components-___orderPrice__summary___bnPVD"},n.default.createElement("div",null,"Cкидка (",100*l/(a+l),"%)"),n.default.createElement("div",null,l," тг")),n.default.createElement("div",{className:"flex flex-center space-between app-order-components-___orderPrice__summary___bnPVD"},n.default.createElement("div",null,"Итого"),n.default.createElement("div",null,a," тг")))}},873:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(o);r(909);var a=r(141);t.default=function(e){var t=e.actions,r=e.voucher;return n.default.createElement("div",{style:{display:"flex",width:"90%",maxWidth:"500px",padding:"20px 0",justifyContent:"center",alignItems:"center",flexDirection:"column",fontFamily:"RobotoRegular"}},n.default.createElement("div",{style:{fontSize:"1em",fontFamily:"RobotoRegular"}},"Есть промокод? Введите и получите скидку."),n.default.createElement("div",{style:{display:"flex",width:"100%",maxWidth:"500px",padding:"20px 0",justifyContent:"space-between",alignItems:"flex-start",flexDirection:"row"},className:"app-order-components-___voucher__promo___38I8P"},n.default.createElement("div",{style:{width:"20%"}},n.default.createElement(a.Input,{maxLength:6,placeholder:"1A2B3C",field:r.voucherField,fieldType:"voucherField",enter:t.voucherInput}),n.default.createElement(a.ErrorText,{text:r.voucherField.errorText})),n.default.createElement(a.Button,{click:function(){t.validateVaucher()}},"Применить")))}},907:function(e,t){e.exports={r:"app-order-components-___form__r___fvmNt"}},908:function(e,t){e.exports={summary:"app-order-components-___orderPrice__summary___bnPVD",first:"app-order-components-___orderPrice__first___2iMv-",title:"app-order-components-___orderPrice__title___MEfZS"}},909:function(e,t){e.exports={promo:"app-order-components-___voucher__promo___38I8P"}},910:function(e,t){e.exports={title:"app-order-___order__title___3cq_j",btns:"app-order-___order__btns___3_Ifo"}}});